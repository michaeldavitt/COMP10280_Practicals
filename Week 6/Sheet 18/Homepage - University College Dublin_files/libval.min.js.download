function defaultHandler(e,l){libVal.debug&&console.log(e,l)}function fileUpload(e){var l=new FileReader;l.addEventListener("loadend",function(l){libVal.fileInfo={fname:e.name,ftype:e.type,fdesc:"",fdata:l.target.result}}),l.readAsDataURL(e)}var libVal=libVal||{};libVal.apiVersion="1.9",libVal.apiVersionDiff=null,libVal.orgUnitId=6606,libVal.fileInfo={},libVal.multipartType=null,libVal.isFilestream=null,libVal.reqFormatParams=null,libVal.debug=!0,libVal.get={},libVal.put={},libVal.post={},libVal.delete={},libVal.urls={},libVal.api=function(e,l,a,r,i){var s=libVal.apiVersion,n=i||{};libVal.apiVersionDiff&&(s=libVal.apiVersionDiff,libVal.apiVersionDiff=null);var l=l.replace("(version)",s);libVal.reqFormatParams&&(l+=libVal.formatParams(a),libVal.reqFormatParams=null);var t=new XMLHttpRequest;t.open(e,l,!0),t.withCredentials=!0,t.storage=n,t.setRequestHeader("X-Csrf-Token",localStorage["XSRF.Token"]),libVal.isFilestream&&(t.responseType="arraybuffer",libVal.isFilestream=null),t.onreadystatechange=function(){if(4===t.readyState){var e="";switch(t.status){case 200:try{e=JSON.parse(t.response)}catch(l){e=t.response}r(e,this.storage);break;default:libVal.error(t.response,this.storage)}}},libVal.multipartType&&(t.setRequestHeader("Content-type","multipart/"+libVal.multipartType+"; boundary=xxBOUNDARYxx"),libVal.multipartType=null),t.send(a)},libVal.error=function(e,l){console.log(e,l)},libVal.formatParams=function(e){return"?"+Object.keys(e).map(function(l){return l+"="+encodeURIComponent(e[l])}).join("&")},libVal.urls.getWhoami="/d2l/api/lp/(version)/users/whoami",libVal.get.whoami=function(e,l){var a=libVal.urls.getWhoami,r=e||defaultHandler,i=l||null;libVal.api("GET",a,{},r,i)},libVal.urls.getClasslist="/d2l/api/le/(version)/(orgUnitId)/classlist/",libVal.get.classlist=function(e,l,a){var r=libVal.urls.getClasslist.replace("(orgUnitId)",e),i=l||defaultHandler,s=a||null;libVal.api("GET",r,{},i,s)},libVal.urls.getClasslistPaged="/d2l/api/le/(version)/(orgUnitId)/classlist/paged/",libVal.get.classlistPaged=function(e,l,a,r){var i=libVal.urls.getClasslistPaged.replace("(orgUnitId)",e),s=a||defaultHandler,n=r||null;libVal.apiVersionDiff="1.27",libVal.api("GET",i,l,s,n)},libVal.urls.getMyEnrollments="/d2l/api/lp/(version)/enrollments/myenrollments/",libVal.get.myEnrollments=function(e,l,a){var r=libVal.urls.getMyEnrollments,i=l||defaultHandler,s=a||null;libVal.api("GET",r,e,i,s)},libVal.urls.getMyEnrollmentsOrg="/d2l/api/lp/(version)/enrollments/myenrollments/(orgUnitId)",libVal.get.myEnrollmentsOrg=function(e,l,a){var r=libVal.urls.getMyEnrollmentsOrg.replace("(orgUnitId)",e),i=l||defaultHandler,s=a||null;libVal.api("GET",r,{},i,s)},libVal.urls.getUsers="/d2l/api/lp/(version)/enrollments/orgUnits/(orgUnitId)/users/",libVal.get.users=function(e,l,a,r){var i=libVal.urls.getUsers.replace("(orgUnitId)",e),s=a||defaultHandler,n=r||null;libVal.api("GET",i,l,s,n)},libVal.urls.getUser="/d2l/api/lp/(version)/enrollments/orgUnits/(orgUnitId)/users/(userId)",libVal.get.user=function(e,l,a,r){var i=libVal.urls.getUser.replace("(orgUnitId)",e).replace("(userId)",l),s=a||defaultHandler,n=r||null;libVal.api("GET",i,{},s,n)},libVal.urls.getUserOrgUnits="/d2l/api/lp/(version)/enrollments/users/(userId)/orgUnits/",libVal.get.userOrgUnits=function(e,l,a,r){var i=libVal.urls.getUserOrgUnits.replace("(userId)",e),s=a||defaultHandler,n=r||null;libVal.api("GET",i,l,s,n)},libVal.urls.getUserOrg="/d2l/api/lp/(version)/enrollments/users/(userId)/orgUnits/(orgUnitId)",libVal.get.userOrg=function(e,l,a,r){var i=libVal.urls.getUserOrg.replace("(userId)",e).replace("(orgUnitId)",l),s=a||defaultHandler,n=r||null;libVal.api("GET",i,{},s,n)},libVal.urls.postModule="/d2l/api/le/(version)/(orgUnitId)/content/root/",libVal.post.module=function(e,l,a,r){var i=libVal.urls.postModule.replace("(orgUnitId)",e),s=a||defaultHandler,n=r||null;libVal.apiVersionDiff="1.12",libVal.api("POST",i,l,s,n)},libVal.urls.postTopic="/d2l/api/le/(version)/(orgUnitId)/content/modules/(moduleId)/structure/",libVal.post.topic=function(e,l,a,r,i,s){var n=libVal.urls.postTopic.replace("(orgUnitId)",e).replace("(moduleId)",l),t=i||defaultHandler,o=s||null;Object.keys(r).length>0&&(n+=libVal.formatParams(r)),libVal.apiVersionDiff="1.22",libVal.multipartType="mixed",libVal.api("POST",n,a,t,o)},libVal.urls.deleteModule="/d2l/api/le/(version)/(orgUnitId)/content/modules/(moduleId)",libVal.delete.module=function(e,l,a,r){var i=libVal.urls.deleteModule.replace("(orgUnitId)",e).replace("(moduleId)",l),s=a||defaultHandler,n=r||null;libVal.apiVersionDiff="1.12",libVal.api("DELETE",i,{},s,n)},libVal.urls.getOverview="/d2l/api/le/(version)/(orgUnitId)/overview",libVal.get.overview=function(e,l,a){var r=libVal.urls.getOverview.replace("(orgUnitId)",e),i=l||defaultHandler,s=a||null;libVal.apiVersionDiff="1.12",libVal.api("GET",r,{},i,s)},libVal.urls.getBookmarks="/d2l/api/le/(version)/(orgUnitId)/content/bookmarks",libVal.get.bookmarks=function(e,l,a){var r=libVal.urls.getBookmarks.replace("(orgUnitId)",e),i=l||defaultHandler,s=a||null;libVal.apiVersionDiff="1.12",libVal.api("GET",r,{},i,s)},libVal.urls.getRecent="/d2l/api/le/(version)/(orgUnitId)/content/recent",libVal.get.recent=function(e,l,a){var r=libVal.urls.getRecent.replace("(orgUnitId)",e),i=l||defaultHandler,s=a||null;libVal.apiVersionDiff="1.12",libVal.api("GET",r,{},i,s)},libVal.urls.getTOC="/d2l/api/le/(version)/(orgUnitId)/content/toc",libVal.get.toc=function(e,l,a){var r=libVal.urls.getTOC.replace("(orgUnitId)",e),i=l||defaultHandler,s=a||null;libVal.apiVersionDiff="1.12",libVal.api("GET",r,{},i,s)},libVal.urls.getCompletions="/d2l/api/le/(version)/(orgUnitId)/content/topics/(topicId)/completions/",libVal.get.completions=function(e,l,a,r,i){var s=libVal.urls.getCompletions.replace("(orgUnitId)",e).replace("(topicId)",l),n=r||defaultHandler,t=i||null;libVal.apiVersionDiff="1.28",libVal.api("GET",s,a,n,t)},libVal.urls.getCompletionsUser="/d2l/api/le/(version)/(orgUnitId)/content/topics/(topicId)/completions/users/(userId)",libVal.get.completionsUser=function(e,l,a,r,i){var s=libVal.urls.getCompletionsUser.replace("(orgUnitId)",e).replace("(topicId)",l).replace("(userId)",a),n=r||defaultHandler,t=i||null;libVal.apiVersionDiff="1.28",libVal.api("GET",s,{},n,t)},libVal.urls.getMyCount="/d2l/api/le/(version)/(orgUnitId)/content/completions/mycount/",libVal.get.myCount=function(e,l,a,r){var i=libVal.urls.getMyCount.replace("(orgUnitId)",e),s=a||defaultHandler,n=r||null;libVal.apiVersionDiff="1.19",libVal.api("GET",i,l,s,n)},libVal.urls.getMyProfile="/d2l/api/lp/(version)/profile/myProfile",libVal.get.myProfile=function(e,l){var a=libVal.urls.getMyProfile,r=e||defaultHandler,i=l||null;libVal.api("GET",a,{},r,i)},libVal.urls.getMyProfileImage="/d2l/api/lp/(version)/profile/myProfile/image",libVal.get.myProfileImage=function(e,l,a){var r=libVal.urls.getMyProfileImage,i=l||defaultHandler,s=a||null;libVal.api("GET",r,e,i,s)},libVal.urls.getProfileUser="/d2l/api/lp/(version)/profile/user/(userId)",libVal.get.profileUser=function(e,l,a){var r=libVal.urls.getProfileUser.replace("(userId)",e),i=l||defaultHandler,s=a||null;libVal.api("GET",r,{},i,s)},libVal.urls.getProfileImageUser="/d2l/api/lp/(version)/profile/user/(userId)/image",libVal.get.profileImageUser=function(e,l,a,r){var i=libVal.urls.getProfileImageUser.replace("(userId)",e),s=a||defaultHandler,n=r||null;libVal.api("GET",i,l,s,n)},libVal.urls.getProfileById="/d2l/api/lp/(version)/profile/user/(userId)",libVal.get.profileById=function(e,l,a){var r=libVal.urls.getProfileById.replace("(userId)",e),i=l||defaultHandler,s=a||null;libVal.api("GET",r,{},i,s)},libVal.urls.getProfileImageById="/d2l/api/lp/(version)/profile/(profileId)/image",libVal.get.profileImageById=function(e,l,a){var r=libVal.urls.getProfileImageById.replace("(profileId)",e),i=l||defaultHandler,s=a||null;libVal.api("GET",r,{},i,s)},libVal.urls.putUpdateProfileById="/d2l/api/lp/(version)/profile/(profileId)",libVal.put.updateProfileById=function(e,l,a,r){var i=libVal.urls.putUpdateProfileById.replace("(profileId)",e),s=a||defaultHandler,n=r||null;libVal.api("PUT",i,l,s,n)},libVal.urls.getRoles="/d2l/api/lp/(version)/roles/",libVal.get.roles=function(e,l){var a=libVal.urls.getRoles,r=e||defaultHandler,i=l||null;libVal.api("GET",a,{},r,i)},libVal.urls.getRole="/d2l/api/lp/(version)/roles/(roleId)",libVal.get.role=function(e,l,a){var r=libVal.urls.getRole.replace("(roleId)",e),i=l||defaultHandler,s=a||null;libVal.api("GET",r,{},i,s)},libVal.urls.getRolesOrg="/d2l/api/lp/(version)/(orgUnitId)/roles/",libVal.get.rolesOrg=function(e,l,a){var r=libVal.urls.getRolesOrg.replace("(orgUnitId)",e),i=l||defaultHandler,s=a||null;libVal.apiVersionDiff="1.10",libVal.api("GET",r,{},i,s)},libVal.urls.getFeed="/d2l/api/lp/(version)/feed/",libVal.get.feed=function(e,l,a){var r=libVal.urls.getFeed,i=l||defaultHandler,s=a||null;libVal.api("GET",r,e,i,s)},libVal.urls.getNews="/d2l/api/le/(version)/(orgUnitId)/news/",libVal.get.news=function(e,l,a,r){var i=libVal.urls.getNews.replace("(orgUnitId)",e),s=a||defaultHandler,n=r||null;libVal.apiVersionDiff="1.12",libVal.api("GET",i,l,s,n)},libVal.urls.getNewsItem="/d2l/api/le/(version)/(orgUnitId)/news/(newsItemId)",libVal.get.newsItem=function(e,l,a,r,i){var s=libVal.urls.getNewsItem.replace("(orgUnitId)",e).replace("(newsItemId)",l),n=r||defaultHandler,t=i||null;libVal.apiVersionDiff="1.12",libVal.api("GET",s,{},n,t)},libVal.urls.getNewsItemAttachment="/d2l/api/le/(version)/(orgUnitId)/news/(newsItemId)/attachments/(fileId)",libVal.get.newsItemAttachment=function(e,l,a,r,i){var s=libVal.urls.getNewsItemAttachment.replace("(orgUnitId)",e).replace("(newsItemId)",l).replace("(fileId)",a),n=r||defaultHandler,t=i||null;libVal.apiVersionDiff="1.12",libVal.api("GET",s,{},n,t)},libVal.urls.deleteNewsItem="/d2l/api/le/(version)/(orgUnitId)/news/(newsItemId)",libVal.delete.newsItem=function(e,l,a,r){var i=libVal.urls.deleteNewsItem.replace("(orgUnitId)",e).replace("(newsItemId)",l);a=a||defaultHandler,r=r||null,libVal.apiVersionDiff="1.12",libVal.api("DELETE",i,{},a,r)},libVal.urls.postNewsItemDismissal="/d2l/api/le/(version)/(orgUnitId)/news/(newsItemId)/dismiss",libVal.post.newsItemDismissal=function(e,l,a,r){var i=libVal.urls.postNewsItemDismissal.replace("(orgUnitId)",e).replace("(newsItemId)",l);a=a||defaultHandler,r=r||null,libVal.apiVersionDiff="1.12",libVal.api("POST",i,{},a,r)},libVal.urls.getAwards="/d2l/api/bas/(version)/awards/",libVal.get.awards=function(e,l,a){var r=libVal.urls.getAwards,i=l||defaultHandler,s=a||null;libVal.apiVersionDiff="1.0",libVal.api("GET",r,e,i,s)},libVal.urls.getAward="/d2l/api/bas/(version)/awards/(awardId)",libVal.get.award=function(e,l,a){var r=libVal.urls.getAward.replace("(awardId)",e),i=l||defaultHandler,s=a||null;libVal.apiVersionDiff="1.0",libVal.api("GET",r,{},i,s)},libVal.urls.getCalendarEvent="/d2l/api/le/(version)/(orgUnitId)/calendar/event/(eventId)",libVal.get.calendarEvent=function(e,l,a,r,i){var s=libVal.urls.getCalendarEvent.replace("(orgUnitId)",e).replace("(eventId)",l),n=r||defaultHandler,t=i||null;libVal.apiVersionDiff="1.12",libVal.api("GET",s,{},n,t)},libVal.urls.getCalendarEvents="/d2l/api/le/(version)/(orgUnitId)/calendar/events/",libVal.get.calendarEvents=function(e,l,a,r){var i=libVal.urls.getCalendarEvents.replace("(orgUnitId)",e),s=a||defaultHandler,n=r||null;libVal.apiVersionDiff="1.12",libVal.api("GET",i,{},s,n)},libVal.urls.getMyEvents="/d2l/api/le/(version)/calendar/events/myEvents/",libVal.get.myEvents=function(e,l,a){var r=libVal.urls.getMyEvents,i=l||defaultHandler,s=a||null;libVal.apiVersionDiff="1.18",libVal.api("GET",r,e,i,s)},libVal.urls.getMyEventsOrg="/d2l/api/le/(version)/(orgUnitId)/calendar/events/myEvents/",libVal.get.myEventsOrg=function(e,l,a,r){var i=libVal.urls.getMyEventsOrg.replace("(orgUnitId)",e),s=a||defaultHandler,n=r||null;libVal.apiVersionDiff="1.18",libVal.api("GET",i,l,s,n)},libVal.urls.getMyEventsItemCounts="/d2l/api/le/(version)/calendar/events/myEvents/itemCounts/",libVal.get.myEventsItemCounts=function(e,l,a){var r=libVal.urls.getMyEventsItemCounts,i=l||defaultHandler,s=a||null;libVal.apiVersionDiff="1.18",libVal.api("GET",r,e,i,s)},libVal.urls.getMyEventsItemCount="/d2l/api/le/(version)/(orgUnitId)/calendar/events/myEvents/itemCount",libVal.get.myEventsItemCount=function(e,l,a,r){var i=libVal.urls.getMyEventsItemCount.replace("(orgUnitId)",e),s=a||defaultHandler,n=r||null;libVal.apiVersionDiff="1.18",libVal.api("GET",i,l,s,n)},libVal.urls.getCallingUserEvents="/d2l/api/le/(version)/(orgUnitId)/calendar/events/orgunits/",libVal.get.callingUserEvents=function(e,l,a,r){var i=libVal.urls.getCallingUserEvents.replace("(orgUnitId)",e),s=a||defaultHandler,n=r||null;libVal.apiVersionDiff="1.12",libVal.api("GET",i,l,s,n)},libVal.urls.getUserEvents="/d2l/api/le/(version)/(orgUnitId)/calendar/events/user/",libVal.get.userEvents=function(e,l,a,r){var i=libVal.urls.getUserEvents.replace("(orgUnitId)",e),s=a||defaultHandler,n=r||null;libVal.apiVersionDiff="1.12",libVal.api("GET",i,l,s,n)},libVal.urls.getDiscussionForums="/d2l/api/le/(version)/(orgUnitId)/discussions/forums/",libVal.get.discussionForums=function(e,l,a){var r=libVal.urls.getDiscussionForums.replace("(orgUnitId)",e),i=l||defaultHandler,s=a||null;libVal.apiVersionDiff="1.12",libVal.api("GET",r,{},i,s)},libVal.urls.getDiscussionTopics="/d2l/api/le/(version)/(orgUnitId)/discussions/forums/(forumId)/topics/",libVal.get.discussionTopics=function(e,l,a,r){var i=libVal.urls.getDiscussionTopics.replace("(orgUnitId)",e).replace("(forumId)",l),s=a||defaultHandler,n=r||null;libVal.apiVersionDiff="1.12",libVal.api("GET",i,{},s,n)},libVal.urls.getDiscussionPosts="/d2l/api/le/(version)/(orgUnitId)/discussions/forums/(forumId)/topics/(topicId)/posts/",libVal.get.discussionPosts=function(e,l,a,r,i,s){var n=libVal.urls.getDiscussionPosts.replace("(orgUnitId)",e).replace("(forumId)",l).replace("(topicId)",a),t=i||defaultHandler,o=s||null;libVal.apiVersionDiff="1.12",libVal.api("GET",n,r,t,o)},libVal.urls.getMyGradeValues="/d2l/api/le/(version)/(orgUnitId)/grades/values/myGradeValues/",libVal.get.myGradeValues=function(e,l,a){var r=libVal.urls.getMyGradeValues.replace("(orgUnitId)",e),i=l||defaultHandler,s=a||null;libVal.apiVersionDiff="1.12",libVal.api("GET",r,{},i,s)},libVal.urls.getFolders="/d2l/api/le/(version)/(orgUnitId)/dropbox/folders/",libVal.get.folders=function(e,l,a,r){var i=libVal.urls.getFolders.replace("(orgUnitId)",e),s=a||defaultHandler,n=r||null;libVal.api("GET",i,l,s,n)},libVal.urls.getFolder="/d2l/api/le/(version)/(orgUnitId)/dropbox/folders/(folderId)",libVal.get.folder=function(e,l,a,r){var i=libVal.urls.getFolder.replace("(orgUnitId)",e).replace("(folderId)",l),s=a||defaultHandler,n=r||null;libVal.api("GET",i,{},s,n)},libVal.urls.postMySubmissions="/d2l/api/le/(version)/(orgUnitId)/dropbox/folders/(folderId)/submissions/mysubmissions/",libVal.post.mySubmissions=function(e,l,a,r,i){var s=libVal.urls.postMySubmissions.replace("(orgUnitId)",e).replace("(folderId)",l),n=r||defaultHandler,t=i||null;libVal.multipartType="mixed",libVal.api("POST",s,a,n,t)};var templates={uploadDropbox:'--xxBOUNDARYxx\r\nContent-Type: application/json\r\n\r\n{"Text": "fdesc", "Html": null}\r\n--xxBOUNDARYxx\r\nContent-Disposition: form-data; name=""; filename="fname"\r\nContent-Type: ftype\r\n\r\n~fdata~\r\n--xxBOUNDARYxx--',uploadCourseContent:'--xxBOUNDARYxx\r\nContent-Type: application/json\r\n\r\n{"IsHidden": false, "IsLocked": false, "ShortTitle": "Simple File Upload", "Type": 1, "DueDate": null, "Url": "furl", "StartDate": null, "TopicType": 1, "EndDate": null, "Title": "Simple File Upload"}\r\n--xxBOUNDARYxx\r\nContent-Disposition: form-data; name=""; filename="fname"\r\nContent-Type: ftype\r\n\r\nfdata\r\n--xxBOUNDARYxx--'};libVal.get.ProfileImage=function(e,l){function a(e,l){var a=r(e);$("#t_"+l.PostId+" img").attr("src","data:image/jpeg;base64,"+a).css("border-radius","50%")}function r(e){for(var l=new Uint8Array(e),a=l.length,r=new Array(a);a--;)r[a]=String.fromCharCode(l[a]);return e=r.join(""),btoa(e)}var i=e.ProfileIdentifier;libVal.isFilestream=!0,libVal.get.getProfileImageById(i,a,l)},libVal.get.latestPosts=function(e,l,a,r){function i(l){for(g=0;g<l.length;++g)if(l[g].Name.toLowerCase()===e.toLowerCase()){p=l[g].ForumId;break}libVal.get.discussionTopics(orgUnitId,p,s)}function s(e){for(g=0;g<e.length;++g)if(e[g].Name.toLowerCase()===l.toLowerCase()){u=e[g].TopicId;break}libVal.get.discussionPosts(orgUnitId,p,u,{pageSize:100},n)}function n(e){var l="",i=e.length<a?e.length:a;for(g=0;g<i;++g)(showReplies&&null!==e[g].ParentPostId||null===e[g].ParentPostId)&&!e[g].IsDeleted?(l+='<p id="t_'+e[g].PostId+'" class="info"><img src="img/blank.png" width="24" height="24" alt="" /> Message &#9679; Posted '+moment(e[g].DatePosted).format("MMMM D YYYY, HH:mm")+"</p>",showProfileImage&&libVal.get.profileById(e[g].PostingUserId,libVal.get.ProfileImage,{PostId:e[g].PostId}),l+='<p class="body">'+o(t(e[g].Message.Html),r,null)+"</p>",l+='<p class="link"><a href="/d2l/le/'+orgUnitId+"/discussions/threads/"+e[g].ThreadId+'/View" target="_top">Go To Post</a><img src="https://rawgit.com/BrightspaceUI/icons/master/images/tier1/arrow-expand-small.svg?raw=true" class="post-continue"></p>',g<i-1&&(l+="<hr/>")):++i;$(".output").html(l),setTimeout(d,1e3)}function t(e){var l=document.createElement("div");return l.innerHTML=e,l.innerText}function o(e,l,a){var r=[" ",".",",",":",";","?","!","&"],i=l;if(null!==a&&void 0!==a&&!0!==a||(a=""),e.length>=l){for(e=e.slice(0,l),i=e.length;i>0&&(-1===r.indexOf(e.substr(i,1))||-1!==r.indexOf(e.substr(i-1,1)));--i);a=""!==a?a:"…"}return!1===a&&(a=""),e.substr(0,i)+a}function d(){var e=$("#content").height();window.parent.parent.$("#combined")&&window.parent.parent.$("#combined").css("height",e+115+"px"),window.parent.$("#discussions iframe").css("height",e+60+"px")}var p,u,g;libVal.get.discussionForums(orgUnitId,i)};var DemographicsHandler=DemographicsHandler||{};DemographicsHandler.apiVersion="1.5",DemographicsHandler.StringDataTypeId="68663035-9f8b-452f-b472-2fb16e21ca30",DemographicsHandler.DemographicsUserEntryData={},DemographicsHandler.initCallback=function(){},DemographicsHandler.putCallback=function(){},DemographicsHandler.putData={},DemographicsHandler.Items=[],DemographicsHandler.myEntryValues={},DemographicsHandler.scope={name:"string",appName:"",fieldId:0,courseId:0,topicId:0,userId:0},DemographicsHandler.scope.fieldIds=[],DemographicsHandler.overwrite=!1,DemographicsHandler.urls={getDemographicsDataTypes:"/d2l/api/lp/(version)/demographics/dataTypes/",getDemographicsFields:"/d2l/api/lp/(version)/demographics/fields/",postDemographicsField:"/d2l/api/lp/(version)/demographics/fields/",getDemographicsUserData:"/d2l/api/lp/(version)/demographics/users/",getDemographicsUserEntry:"/d2l/api/lp/(version)/demographics/users/(userId)",putDemographicsUserEntry:"/d2l/api/lp/(version)/demographics/users/(userId)",deleteDemographicsField:"/d2l/api/lp/(version)/demographics/fields/(fieldId)",deleteDemographicsUserData:"/d2l/api/lp/(version)/demographics/users/(userId)"},DemographicsHandler.init=function(e,l,a,r){DemographicsHandler.scope={topicId:r,courseId:a,appName:l,fieldIds:[]},DemographicsHandler.initCallback=e,null!==r?DemographicsHandler.getDemographicsFields(DemographicsHandler.sortFields,{}):DemographicsHandler.getDemographicsFields(DemographicsHandler.sortMultipleFields,{})},DemographicsHandler.getDemographicsDataTypes=function(e,l){var a=DemographicsHandler.urls.getDemographicsDataTypes;DemographicsHandler.api("GET",a,l,e,DemographicsHandler.apiError)},DemographicsHandler.getDemographicsFields=function(e,l,a,r){null!==r&&(l={Bookmark:r});var i=DemographicsHandler.urls.getDemographicsFields;DemographicsHandler.api("GET",i,l,e,DemographicsHandler.apiError)},DemographicsHandler.getDemographicsUserData=function(e,l,a,r){var i="";i=null!==a?DemographicsHandler.urls.getDemographicsUserData+a:DemographicsHandler.urls.getDemographicsUserData;for(var s="",n=0;n<DemographicsHandler.scope.fieldIds.length;n++)s+=DemographicsHandler.scope.fieldIds[n].fieldId,n+1!==DemographicsHandler.scope.fieldIds.length&&(s+=",");s=encodeURI(s),null!==r&&(l={Bookmark:r,fieldIds:s}),DemographicsHandler.api("GET",i,l,e,DemographicsHandler.apiError)},DemographicsHandler.getDemographicsUserEntry=function(e,l,a){var r=DemographicsHandler.urls.getDemographicsUserEntry.replace("(userId)",a);DemographicsHandler.api("GET",r,{},e,DemographicsHandler.apiError)},DemographicsHandler.putDemographicsUserEntry=function(e,l,a,r){DemographicsHandler.putCallback=e,DemographicsHandler.putData=l,DemographicsHandler.scope.userId=a,null===r&&void 0===r||(DemographicsHandler.overwrite=r);var i=DemographicsHandler.urls.getDemographicsUserEntry.replace("(userId)",a);DemographicsHandler.api("GET",i,{},DemographicsHandler.sortMyEntryValues,DemographicsHandler.getDemographicsUserEntryError)},DemographicsHandler.postDemographicsField=function(e,l,a){var r={Name:DemographicsHandler.scope.appName+"-"+DemographicsHandler.scope.courseId+"-"+DemographicsHandler.scope.topicId,Description:"test",DataTypeId:DemographicsHandler.StringDataTypeId},i=JSON.stringify(r),s=DemographicsHandler.urls.postDemographicsField;DemographicsHandler.api("POST",s,i,e,DemographicsHandler.apiError)},DemographicsHandler.deleteDemographicsField=function(e,l,a,r){DemographicsHandler.putCallback=e,DemographicsHandler.putData=l,DemographicsHandler.scope.userId=a,DemographicsHandler.scope.fieldIds=[],DemographicsHandler.scope.fieldIds.push(r);var i=DemographicsHandler.urls.getDemographicsUserEntry.replace("(userId)",a);DemographicsHandler.api("GET",i,{},DemographicsHandler.searchAndRemoveUserEntry,DemographicsHandler.getDemographicsUserEntryError)},DemographicsHandler.searchAndRemoveUserEntry=function(e){for(var l=[],a=0;a<e.EntryValues.length;a++){l=[];for(var r=0;r<e.EntryValues[a].Values.length;r++){var i=JSON.parse(e.EntryValues[a].Values[r]);Number(i.fieldId)!==Number(DemographicsHandler.scope.fieldIds[0])&&l.push(e.EntryValues[a].Values[r])}e.EntryValues[a].Values=l}DemographicsHandler.DemographicsUserEntryData=JSON.stringify(e);var s=DemographicsHandler.urls.putDemographicsUserEntry.replace("(userId)",e.UserId);DemographicsHandler.api("PUT",s,DemographicsHandler.DemographicsUserEntryData,DemographicsHandler.putCallback,DemographicsHandler.apiError)},DemographicsHandler.sortFields=function(e){var l=!1;DemographicsHandler.scope.fieldIds=[];for(var a=0;a<e.Items.length;a++)if(e.Items[a].Name.indexOf(DemographicsHandler.scope.appName)>-1&&e.Items[a].Name.indexOf(DemographicsHandler.scope.courseId)>-1&&e.Items[a].Name.indexOf(DemographicsHandler.scope.topicId)>-1){var r={};r.name=e.Items[a].Name,r.fieldId=e.Items[a].FieldId,DemographicsHandler.scope.fieldIds.push(r),DemographicsHandler.scope.name=e.Items[a].Name,DemographicsHandler.scope.FieldId=e.Items[a].FieldId,l=!0;break}!0!==l?!0===e.PagingInfo.HasMoreItems?DemographicsHandler.getDemographicsFields(DemographicsHandler.sortFields,{},null,e.PagingInfo.Bookmark):DemographicsHandler.postDemographicsField(DemographicsHandler.newFieldCreated,{}):DemographicsHandler.getDemographicsUserData(DemographicsHandler.sortEntryValues,{},null)},DemographicsHandler.sortMultipleFields=function(e){DemographicsHandler.scope.fieldIds=[];for(var l=0;l<e.Items.length;l++)if(e.Items[l].Name.indexOf(DemographicsHandler.scope.appName)>-1&&e.Items[l].Name.indexOf(DemographicsHandler.scope.courseId)>-1){var a={};a.name=e.Items[l].Name,a.fieldId=e.Items[l].FieldId,DemographicsHandler.scope.fieldIds.push(a)}DemographicsHandler.getDemographicsUserData(DemographicsHandler.sortEntryValues,{},null)},DemographicsHandler.sortEntryValues=function(e){for(var l=0;l<e.Items.length;l++)for(var a=0;a<e.Items[l].EntryValues.length;a++)for(var r=0;r<DemographicsHandler.scope.fieldIds.length;r++)if(e.Items[l].EntryValues[a].Name===DemographicsHandler.scope.fieldIds[r].name){for(var i={Name:e.Items[l].EntryValues[a].Name,UserId:e.Items[l].UserId,Values:e.Items[l].EntryValues[a].Values},s=!1,n=0;n<DemographicsHandler.Items.length;n++)DemographicsHandler.Items[n].Name===e.Items[l].EntryValues[a].Name&&DemographicsHandler.Items[n].UserId===e.Items[l].UserId&&(s=!0);!1===s&&DemographicsHandler.Items.push(i)}!0===e.PagingInfo.HasMoreItems?DemographicsHandler.getDemographicsUserData(DemographicsHandler.sortEntryValues,{},null,e.PagingInfo.Bookmark):DemographicsHandler.initCallback(DemographicsHandler.Items)},DemographicsHandler.sortMyEntryValues=function(e){for(var l=0;l<DemographicsHandler.putData.Values.length;l++)DemographicsHandler.putData.Values[l]=JSON.stringify(DemographicsHandler.putData.Values[l]);if(!0===DemographicsHandler.overwrite)for(var a=0;a<e.EntryValues.length;a++)DemographicsHandler.scope.name===e.EntryValues[a].Name&&(e.EntryValues[a]={Name:DemographicsHandler.scope.name,Values:DemographicsHandler.putData.Values});else e.EntryValues.push({Name:DemographicsHandler.scope.name,Values:DemographicsHandler.putData.Values});DemographicsHandler.DemographicsUserEntryData=JSON.stringify(e);var r=DemographicsHandler.urls.putDemographicsUserEntry.replace("(userId)",DemographicsHandler.scope.userId);DemographicsHandler.api("PUT",r,DemographicsHandler.DemographicsUserEntryData,DemographicsHandler.putCallback,DemographicsHandler.apiError)},DemographicsHandler.newFieldCreated=function(e){DemographicsHandler.putDemographicsUserEntryComplete(DemographicsHandler.Items)},DemographicsHandler.putDemographicsUserEntryComplete=function(e){var l=[];DemographicsHandler.initCallback(l)},DemographicsHandler.done=function(e){console.log(e)},DemographicsHandler.getDemographicsUserEntryError=function(e){if(console.log(e),404===e.status){var l={UserId:DemographicsHandler.scope.userId,EntryValues:[]};DemographicsHandler.sortMyEntryValues(l)}},DemographicsHandler.api=function(e,l,a,r,i){var s=l.replace("(version)",DemographicsHandler.apiVersion);"GET"===e?$.ajax(s,{method:e,headers:{"X-Csrf-Token":localStorage["XSRF.Token"]},data:a,credentials:"same-origin",xhrFields:{withCredentials:!0},success:r,error:i}):$.ajax(s,{method:e,headers:{"X-Csrf-Token":localStorage["XSRF.Token"]},data:a,credentials:"same-origin",xhrFields:{withCredentials:!0},contentType:"application/x-www-form-urlencoded",success:r,error:i})},DemographicsHandler.apiError=function(e){console.log(e)};